{% extends "admin/base.html" %}
{% load static %}

{% block branding %}
    {% include "unfold/helpers/site_branding.html" %}
{% endblock %}

{% block subheader %}
    {{ site_subheader }}
{% endblock %}

{% block extrahead %}
<style>
/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
.dashboard-container {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

/* –°–µ—Ç–∫–∞ KPI-–∫–∞—Ä—Ç–æ—á–µ–∫ */
.kpi-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

@media (min-width: 640px) {
    .kpi-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
@media (min-width: 1024px) {
    .kpi-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ KPI */
.kpi-card {
    padding: 1rem;
    border-radius: 12px;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s, opacity 0.2s;
}
.kpi-card:hover {
    transform: translateY(-2px);
    opacity: 0.95;
}
.kpi-title {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}
.kpi-value {
    font-size: 2rem;
    font-weight: 800;
}

/* –¶–≤–µ—Ç–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
.kpi-users { background: linear-gradient(135deg, #6366F1, #4F46E5); }
.kpi-venues { background: linear-gradient(135deg, #10B981, #059669); }
.kpi-bookings { background: linear-gradient(135deg, #F59E0B, #D97706); }
.kpi-revenue { background: linear-gradient(135deg, #F43F5E, #BE185D); }

/* –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–ª–æ—â–∞–¥–æ–∫ */
.table-container {
    {% comment %} background: white; {% endcomment %}
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    overflow-x: auto;
}
.table-container table {
    width: 100%;
    border-collapse: collapse;
}
.table-container th,
.table-container td {
    padding: 0.75rem 1rem;
    text-align: left;
}
.table-container th {
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    color: #6B7280;
    border-bottom: 1px solid #E5E7EB;
}
.table-container tr:hover {
    background-color: #F3F4F6;
    color: #111827;
}
.table-container td.booking-count {
    text-align: right;
    font-weight: 700;
    color: #6366F1;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 640px) {
    .kpi-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    .kpi-value { font-size: 1.5rem; }
}
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">

    <!-- KPI –ö–∞—Ä—Ç–æ—á–∫–∏ -->
    <div class="kpi-grid">
        <div class="kpi-card kpi-users">
            <span class="kpi-title">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
            <span class="kpi-value">{{ total_users|default:0 }}</span>
        </div>
        <div class="kpi-card kpi-venues">
            <span class="kpi-title">üèüÔ∏è –ü–ª–æ—â–∞–¥–∫–∏</span>
            <span class="kpi-value">{{ total_venues|default:0 }}</span>
        </div>
        <div class="kpi-card kpi-bookings">
            <span class="kpi-title">üìÖ –ë—Ä–æ–Ω–∏</span>
            <span class="kpi-value">{{ total_bookings|default:0 }}</span>
        </div>
        <div class="kpi-card kpi-revenue">
            <span class="kpi-title">üí∞ –î–æ—Ö–æ–¥</span>
            <span class="kpi-value">{{ total_revenue|default:0 }} —Å—É–º</span>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–ª–æ—â–∞–¥–æ–∫ -->
    <div class="table-container mt-6 p-4">
        <h2 class="text-lg font-bold text-gray-900 mb-2">üèÜ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏</h2>
        <span class="text-gray-500 text-sm">–¢–æ–ø-5 –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –±—Ä–æ–Ω–µ–π</span>
        <table class="mt-3">
            <thead>
                <tr>
                    <th>–ü–ª–æ—â–∞–¥–∫–∞</th>
                    <th class="booking-count">–ë—Ä–æ–Ω–∏</th>
                </tr>
            </thead>
            <tbody>
                {% for venue in top_venues %}
                <tr>
                    <td>{{ venue.stadium__name }}</td>
                    <td class="booking-count">{{ venue.total }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2" class="text-center py-4 text-gray-500">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
